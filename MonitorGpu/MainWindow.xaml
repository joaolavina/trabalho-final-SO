<Window x:Class="MonitorGpu.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="GpuMonitor - FPS e Sistema" Height="480" Width="720"
        MinHeight="420" MinWidth="600">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="140"/>
        </Grid.RowDefinitions>

        <!-- Cabeçalho + controles -->
        <StackPanel Orientation="Horizontal" VerticalAlignment="Top" Margin="0,0,0,10">
            <TextBlock Text="GpuMonitor" FontSize="20" FontWeight="Bold" VerticalAlignment="Center"/>
            <Separator Width="16"/>
            <Button x:Name="BtnStart" Content="Iniciar" Click="BtnStart_Click" Margin="4,0"/>
            <Button x:Name="BtnStop" Content="Parar" Click="BtnStop_Click" Margin="4,0" IsEnabled="False"/>
            <Button x:Name="BtnExport" Content="Exportar CSV" Click="BtnExport_Click" Margin="4,0"/>
            <TextBlock Text=" " Width="12"/>
            <TextBlock Text="Polling:" VerticalAlignment="Center"/>
            <ComboBox x:Name="CbPolling" Width="80" SelectedIndex="1" Margin="6,0">
                <ComboBoxItem>250</ComboBoxItem>
                <ComboBoxItem>500</ComboBoxItem>
                <ComboBoxItem>1000</ComboBoxItem>
                <ComboBoxItem>2000</ComboBoxItem>
            </ComboBox>
            <TextBlock Text=" ms" VerticalAlignment="Center"/>
            <TextBlock Text="   " Width="12"/>
            <TextBlock Text="FPS (app):" VerticalAlignment="Center"/>
            <TextBlock x:Name="TxtFps" FontWeight="Bold" Margin="6,0" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Grid com valores atuais -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                <TextBlock Text="Métricas atuais" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,8"/>
                <StackPanel>
                    <TextBlock Text="CPU:"/>
                    <TextBlock x:Name="TxtCpu" FontSize="14" FontWeight="Bold" Margin="0,0,0,6"/>
                    <TextBlock Text="GPU (uso):"/>
                    <TextBlock x:Name="TxtGpu" FontSize="14" FontWeight="Bold" Margin="0,0,0,6"/>
                    <TextBlock Text="Memória física:"/>
                    <TextBlock x:Name="TxtRam" FontSize="14" FontWeight="Bold" Margin="0,0,0,6"/>
                    <TextBlock Text="GPU - Nome (se detectada):" Margin="0,6,0,0"/>
                    <TextBlock x:Name="TxtGpuName" FontSize="13" Margin="0,0,0,6"/>
                </StackPanel>
            </StackPanel>

            <StackPanel Grid.Column="1">
                <TextBlock Text="Últimos logs" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,8"/>
                <TextBox x:Name="TxtLog" VerticalScrollBarVisibility="Auto" IsReadOnly="True" TextWrapping="Wrap"
                         AcceptsReturn="True" Height="260"/>
            </StackPanel>
        </Grid>

        <!-- Rodapé / instruções -->
        <TextBlock Grid.Row="2" TextWrapping="Wrap" Margin="0,10,0,0">
            Observações: o contador de FPS mede os frames da própria app (WPF). Para FPS de outros programas é necessário hook/injeção.
            GPU usage via WMI pode não estar disponível em todos os drivers/sistemas.
        </TextBlock>
    </Grid>
</Window>
